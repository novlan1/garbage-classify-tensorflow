(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{287:function(e){e.exports=JSON.parse('["\u5176\u4ed6\u5783\u573e","\u53a8\u4f59\u5783\u573e","\u53ef\u56de\u6536\u7269","\u6709\u5bb3\u5783\u573e"]')},363:function(e,t){},364:function(e,t){},372:function(e,t){},375:function(e,t){},376:function(e,t){},418:function(e,t,n){"use strict";n.r(t);var r=n(48),a=n(8),c=n.n(a),s=n(65),i=n.n(s),o=n(4),l=n.n(o),p=n(13),u=n(5),d=n(11),m=n(15),f=n(16),j=n(422),h=n(421),b=n(240),g=n(329),v=(n(358),{"\u6709\u5bb3\u5783\u573e":{icon:"https://lajifenleiapp.com/static/svg/2v_B43953.svg",color:"#B43953",info:"\u662f\u6307\u751f\u6d3b\u5783\u573e\u4e2d\u5bf9\u4eba\u4f53\u5065\u5eb7\u6216\u8005\u81ea\u7136\u73af\u5883\u9020\u6210\u76f4\u63a5\u6216\u8005\u6f5c\u5728\u5371\u5bb3\u7684\u7269\u8d28\uff0c\u5305\u62ec\u5e9f\u5145\u7535\u7535\u6c60\u3001\u5e9f\u6263\u5f0f\u7535\u6c60\u3001\u5e9f\u706f\u7ba1\u3001\u5f03\u7f6e\u836f\u54c1\u3001\u5e9f\u6740\u866b\u5242(\u5bb9\u5668)\u3001\u5e9f\u6cb9\u6f06(\u5bb9\u5668)\u3001\u5e9f\u65e5\u7528\u5316\u5b66\u54c1\u3001\u5e9f\u6c34\u94f6\u4ea7\u54c1\u3001\u5e9f\u65e7\u7535\u5668\u4ee5\u53ca\u7535\u5b50\u4ea7\u54c1\u7b49\u3002"},"\u53ef\u56de\u6536\u7269":{icon:"https://lajifenleiapp.com/static/svg/1_3F6BA8.svg",color:"#3F6BA8",info:"\u662f\u6307\u5728\u65e5\u5e38\u751f\u6d3b\u4e2d\u6216\u8005\u4e3a\u65e5\u5e38\u751f\u6d3b\u63d0\u4f9b\u670d\u52a1\u7684\u6d3b\u52a8\u4e2d\u4ea7\u751f\u7684\uff0c\u5df2\u7ecf\u5931\u53bb\u539f\u6709\u5168\u90e8\u6216\u8005\u90e8\u5206\u4f7f\u7528\u4ef7\u503c\uff0c\u56de\u6536\u540e\u7ecf\u8fc7\u518d\u52a0\u5de5\u53ef\u4ee5\u6210\u4e3a\u751f\u4ea7\u539f\u6599\u6216\u8005\u7ecf\u8fc7\u6574\u7406\u53ef\u4ee5\u518d\u5229\u7528\u7684\u7269\u54c1\uff0c\u5305\u62ec\u5e9f\u7eb8\u7c7b\u3001\u5851\u6599\u7c7b\u3001\u73bb\u7483\u7c7b\u3001\u91d1\u5c5e\u7c7b\u3001\u7ec7\u7269\u7c7b\u7b49\u3002"},"\u53a8\u4f59\u5783\u573e":{icon:"https://lajifenleiapp.com/static/svg/3v_48925B.svg",color:"#48925B",info:"\u662f\u6307\u5c45\u6c11\u65e5\u5e38\u751f\u6d3b\u4e2d\u4ea7\u751f\u7684\u6709\u673a\u6613\u8150\u5783\u573e\uff0c\u5305\u62ec\u83dc\u53f6\u3001\u5269\u83dc\u3001\u5269\u996d\u3001\u679c\u76ae\u3001\u86cb\u58f3\u3001\u8336\u6e23\u3001\u9aa8\u5934\u7b49\u3002"},"\u5176\u4ed6\u5783\u573e":{icon:"https://lajifenleiapp.com/static/svg/4_89918B.svg",color:"#89918B",info:"\u662f\u6307\u9664\u53ef\u56de\u6536\u7269\u3001\u6709\u5bb3\u5783\u573e\u548c\u53a8\u4f59\u5783\u573e\u4e4b\u5916\u7684\uff0c\u6df7\u6742\u3001\u6c61\u67d3\u3001\u96be\u5206\u7c7b\u7684\u5176\u4ed6\u751f\u6d3b\u5783\u573e\u3002"}}),y=n(287),O=n(181);function x(e){var t="image/jpeg"===e.type||"image/png"===e.type;t||j.b.error("You can only upload JPG/PNG file!");var n=e.size/1024/1024<2;return n||j.b.error("Image must smaller than 2MB!"),t&&n}function w(e){return new Promise((function(t){var n=new FileReader;n.readAsDataURL(e),n.onload=function(e){var n=document.createElement("img");n.src=e.target.result,n.width=224,n.height=224,n.onload=function(){return t(n)}}}))}function N(e){return O.c((function(){return O.a.fromPixels(e).toFloat().sub(127.5).div(127.5).reshape([1,224,224,3])}))}var B=function(e){Object(m.a)(n,e);var t=Object(f.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).handleChange=function(e){"uploading"!==e.file.status?(!function(e,t){var n=new FileReader;n.addEventListener("load",(function(){return t(n.result)})),n.readAsDataURL(e)}(e.file.originFileObj,(function(e){r.setState({imageUrl:e,loading:!1})})),console.log(e),r.onPredict(e.file.originFileObj)):r.setState({loading:!0,imageUrl:null,predictRes:[]})},r.onPredict=function(){var e=Object(p.a)(l.a.mark((function e(t){var n,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t);case 2:return n=e.sent,e.next=5,O.c((function(){var e=N(n);return r.model.predict(e)}));case 5:(a=e.sent).print(),c=a.arraySync()[0].map((function(e,t){return{score:e,label:r.classes[t]}})).sort((function(e,t){return t.score-e.score})),console.log(c),r.onHandlePredictResult(c);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.onHandlePredictResult=function(e){e.map((function(e){v[e.label]&&(e.icon=v[e.label].icon,e.color=v[e.label].color,e.intro=v[e.label].info,e.percent=parseInt(100*e.score))})),r.setState({predictRes:e}),console.log(e)},r.state={predictRes:[]},r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.b("https://novlan1.github.io/garbage-classify-tensorflow/my-app/src/output/model.json");case 2:this.model=e.sent,this.model.summary(),this.classes=y;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.imageUrl,n=e.predictRes;return Object(r.jsxs)("div",{className:"wrap",children:[Object(r.jsx)(h.a,{accept:"image/*",showUploadList:!1,beforeUpload:x,onChange:this.handleChange,className:"upload",children:Object(r.jsx)(b.a,{type:"primary",style:{width:"calc(100vw - 5rem)",marginTop:"1rem"},children:"\u4e0a\u4f20"})}),Object(r.jsx)("div",{children:t&&Object(r.jsx)("img",{src:t,style:{width:"100%",marginTop:"1rem"}})}),Object(r.jsxs)("div",{style:{marginTop:"1rem"},children:[Object(r.jsx)("div",{children:"\u8bc6\u522b\u7ed3\u679c\uff1a"}),!!n.length&&Object(r.jsxs)("div",{style:{display:"flex"},children:[Object(r.jsx)("span",{children:Object(r.jsx)("img",{className:"garbage-type",src:n[0].icon})}),Object(r.jsxs)("span",{style:{marginLeft:"0.2rem",color:n[0].color},children:[Object(r.jsx)("h4",{style:{color:n[0].color},children:n[0].label}),Object(r.jsx)("span",{children:n[0].intro})]})]})]}),Object(r.jsxs)("div",{style:{margin:"1rem 0"},children:[Object(r.jsxs)("div",{className:"type-row",children:[Object(r.jsx)("span",{className:"type-row-left",children:"\u7c7b\u522b"}),Object(r.jsx)("span",{className:"type-row-right",children:"\u5339\u914d\u5ea6"})]}),!!n.length&&n.map((function(e){return Object(r.jsxs)("div",{className:"type-row",children:[Object(r.jsx)("span",{className:"type-row-left",children:e.label}),Object(r.jsx)("span",{className:"type-row-right",children:Object(r.jsx)(g.a,{percent:e.percent})})]},e.label)}))]})]})}}]),n}(c.a.PureComponent);i.a.render(Object(r.jsx)(B,{}),document.getElementById("app"))}},[[418,1,2]]]);
//# sourceMappingURL=main.983229f9.chunk.js.map